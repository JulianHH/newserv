@include@ @includel@../build.mk@includel@

CFLAGS+=$(INCDBAPI)
LDFLAGS+=$(LIBDBAPI)

TRUSTSDIRS=search newsearch nterfacer

.PHONY: all dirs $(TRUSTSDIRS) clean distclean

all: trusts2.so trusts2_commands.so dirs

trusts2.so: trusts_ident.o trusts_hosts.o trusts_groups.o trusts_alloc.o trusts2.o trusts_handlers.o trusts_blocks.o trusts_hash.o trusts_db.o

trusts2_commands.so: trusts2_commands.o

dirs: $(TRUSTSDIRS)
	ln -sf */*.so .

$(TRUSTSDIRS):
	cd $@ && $(MAKE) $(MFLAGS) all

clean:
	rm -f */*.o */*.so *.o *.so

distclean:
	rm -f */Makefile Makefile 
